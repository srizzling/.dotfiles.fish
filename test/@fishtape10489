fish -c '
functions -q setup; and setup; true; fishtape @test 1 "bat is available and working" (bat --version | string match -q "bat*")
functions -q setup; and setup; true; fishtape @test 1 "curl is available and working" (curl --version | string match -q "curl*")
functions -q setup; and setup; true; fishtape @test 1 "fd is available and working" (fd --version | string match -q "fd*")  
functions -q setup; and setup; true; fishtape @test 1 "fzf is available and working" (fzf --version | string match -q "*.*")
functions -q setup; and setup; true; fishtape @test 1 "direnv is available and working" (direnv --version | string match -q "*.*")
functions -q setup; and setup; true; fishtape @test 1 "git is available and working" (git --version | string match -q "git version*")
functions -q setup; and setup; true; fishtape @test 1 "git-absorb is available and working" (git-absorb --version | string match -q "git-absorb*")
functions -q setup; and setup; true; fishtape @test 1 "delta is available and working" (delta --version | string match -q "delta*")
functions -q setup; and setup; true; fishtape @test 1 "GitHub CLI is available and working" (gh --version | string match -q "gh version*")
functions -q setup; and setup; true; fishtape @test 1 "lsd is available and working" (lsd --version | string match -q "lsd*")
functions -q setup; and setup; true; fishtape @test 1 "starship is available and working" (starship --version | string match -q "starship*")
functions -q setup; and setup; true; fishtape @test 1 "zoxide is available and working" (zoxide --version | string match -q "zoxide*")
functions -q setup; and setup; true; fishtape @test 1 "grc is available and working" (grc --version | string match -q "Generic Colouriser*")
functions -q setup; and setup; true; fishtape @test 1 "gum is available and working" (gum --version | string match -q "gum*")
functions -q setup; and setup; true; fishtape @test 1 "wget is available and working" (wget --version | string match -q "GNU Wget*")
functions -q setup; and setup; true; fishtape @test 1 "python3 is available and working" (python --version | string match -q "Python 3*")
functions -q setup; and setup; true; fishtape @test 1 "jq is available and working" (jq --version | string match -q "jq-*")
functions -q setup; and setup; true; fishtape @test 1 "ripgrep is available and working" (rg --version | string match -q "ripgrep*")
functions -q setup; and setup; true; fishtape @test 1 "tree is available and working" (tree --version | string match -q "tree v*")
functions -q setup; and setup; true; fishtape @test 1 "htop is available and working" (htop --version | string match -q "htop*")  
functions -q setup; and setup; true; fishtape @test 1 "just is available and working" (just --version | string match -q "just*")
functions -q setup; and setup; true; fishtape @test 1 "devbox is available and working" (devbox version | string match -q "*.*")
functions -q setup; and setup; true; fishtape @test 1 "podman is available and working" (podman --version | string match -q "podman version*")
functions -q setup; and setup; true; fishtape @test 1 "podman-compose is available and working" (podman-compose --version | string match -q "*.*")
functions -q setup; and setup; true; fishtape @test 1 "PATH includes Nix system binaries" (echo $PATH | string match -q "*/run/current-system/sw/bin*")
functions -q setup; and setup; true; fishtape @test 1 "PATH includes per-user profile" (echo $PATH | string match -q "*/etc/profiles/per-user/*")
functions -q setup; and setup; true; fishtape @test 1 "docker alias points to podman" (fish -c "which docker" | string match -q "*podman*")
functions -q setup; and setup; true; fishtape @test 1 "fishtape is available and working" (fishtape --version | string match -q "fishtape version*")
echo 1'&;set -l jobs $jobs (jobs -l | command awk '/^[0-9]+\t/ { print $1 }');fish -c '
functions -q setup; and setup; true; fishtape @test 2 "ll alias works" (alias ll | string match -q "*lsd -la*")
functions -q setup; and setup; true; fishtape @test 2 "la alias works" (alias la | string match -q "*lsd